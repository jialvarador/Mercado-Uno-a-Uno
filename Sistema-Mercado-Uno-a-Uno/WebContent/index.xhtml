<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:ui="http://java.sun.com/jsf/facelets"
    
      >
    <h:head>
        <title>index</title>
								  <!-- 
								 <script type="text/javascript" >
								  function recargar()
								  {
								  location.href=location.href
								  }
								  setInterval('recargar()',10000)
								    </script>
								   -->  
								    
    </h:head>
    
    <h:body>
     <p:separator style="width:1300px;height:3px" />          
       
           <p:graphicImage value="/images/sam.jpg"  width="200" height="150"/>
           <p:spacer style="width:100px; height:1px " />
           <p:outputLabel value="#{ControladorSesion.obtenerFecha()}"   />       
           <p:spacer style="width:100px; height:1px"/>
           <p:spacer style="width:2px; " />
       
        
        <p:spacer style="width:16px; height:1px"/>
      	<p:outputLabel font-size="20px;" value="Hola , #{ControladorSesion.obtenerValorSesion('administrador')}" rendered="#{ControladorSesion.tieneSesion('administrador')}" />
        
        <p:spacer style="width:16px; height:1px"/>
        <p:outputLabel  value="ID , #{ControladorSesion.obtenerValorSesioIDn('identificador')}" rendered="#{ControladorSesion.tieneSesion('administrador')}" />
        
        <p:spacer style="width:16px; height:1px"/>
        <p:commandLink action="wizard.xhtml" value="Publicar" process="@this" rendered="#{ControladorSesion.tieneSesion('administrador')}">
        <h:outputText value="publicar" />
        </p:commandLink>
        
        <p:spacer style="width:16px; height:1px"/>
        <p:commandLink action="cuentaUsuario.xhtml" value="Cuenta" process="@this" rendered="#{ControladorSesion.tieneSesion('administrador')}">
        <h:outputText value="cuenta" />
        </p:commandLink>
         
        <p:spacer style="width:16px; height:1px"/>
        <p:commandLink action="#{ControladorSesion.cerrarSesion}" value="Cerrar sesiòn" process="@this" rendered="#{ControladorSesion.tieneSesion('administrador')}">
        <h:outputText value="Cerrar sesión" />
        </p:commandLink>
        
        
        
        
        <p:spacer style="width:16px; height:1px" />
        <p:commandLink action="bienvenido.xhtml" value="Iniciar sesion" process="@this" rendered="#{ControladorSesion.ocultarEnSesion('administrador')}" >
        <h:outputText value="Iniciar sesion" />
        </p:commandLink>
        
        <p:spacer style="width:16px; height:1px"/>
        <p:commandLink action="nuevo_usuario.xhtml" value="registrarse" process="@this" rendered="#{ControladorSesion.ocultarEnSesion('administrador')}" >
        <h:outputText value="Registrase" />
        </p:commandLink>
    
       <p:separator style="width:1300px; height:20px" />          
       

        
         <h:form>
    	    <h:outputLink id="lnk" value="#">
					<h:outputText value="Mas Info." />
				    </h:outputLink>
					
					<p:tooltip for="lnk">
					<p:graphicImage value="/images/Fre.png" width="100" height="70" />
					<h:outputText value="el lugar donde puedes comprar, vender, rentar y anunciar" />
					</p:tooltip>
                   
                     <p:separator></p:separator>
					
					

        <p:growl id="msj"/>
        <p:separator></p:separator>
                    
  
            
            
           <p:spacer style="width:320px; height:1px"/>
           
<p:panelGrid columns="3" >     	
					
					<p:panelGrid columns="4">
					     <p:graphicImage value="/images/sam.jpg" height="200" width="200" />
			             <strong>Publicá GRATIS en Mercado Uno a Uno</strong>
				         <p><strong >Publicá gratis tu aviso.</strong></p>
					     <p>Encontrá lo que quieras.</p>
					     <p>Donde quieras.</p>
					     <p:graphicImage value="/images/modelo.jpg" height="400" width="250" />
					     <span>¡100% gratis, rápido y fácil!</span>
					     <p>¿Tienés algo para vender?</p>
					</p:panelGrid>
					
					
				    <p:panelGrid columns="2">
					    <p:outputLabel value="Buscar"/>
					    <p:selectOneMenu id="cat" value="#{BuscarCategoria.categoriaID}" required="hola" >
				        <f:selectItem itemLabel="Selecciona una Categoria" itemValue="0" />
	    		        <f:selectItem itemLabel="Ventas" itemValue="1" />
	    		        <f:selectItem itemLabel="Rentas" itemValue="2" />
	    		        <f:selectItem itemLabel="Articulos perdidos" itemValue="3" />
	    		        <f:selectItem itemLabel="Anuncios" itemValue="4" />
	    		        </p:selectOneMenu>
	    		        <p:outputLabel />
					    <p:commandButton value="ok"  action="#{BuscarCategoria.buscarPorCategoria}" />
					</p:panelGrid>
				
				        
</p:panelGrid>
	
		   
		    <p:dataTable id="userList" var="user" value="#{MostrarPublicacion.listaPublicacion}"  editable="true" rowKey="#{user.nombreCategoria}" emptyMessage="No Hay cocidencias">

            <p:column headerText="Categoria" style="width:125px" filterBy="#{user.nombreCategoria}" sortBy="#{user.nombreCategoria}" />
            <p:column headerText="Titulo" style="width:125px" filterBy="#{user.titulo}" sortBy="#{user.titulo}" />
             <p:column headerText="Categoria:">
                  <h:outputText value="#{user.nombreCategoria}"/>
            </p:column>
        
            <p:column >
                 <p:graphicImage  value="/images/#{user.idPublicacion}.jpg" width="100" height="100" />
            </p:column>
            
            <p:column headerText="Titulo">
          		  <p:commandLink action="wizard.xhtml" value="#{user.titulo}" process="@this" />
            </p:column>        
                   
           
            <p:column >
                  <h:outputText value="#{user.fecha}" />
            </p:column>
            
            
			 <p:column headerText="  "> 
			 
			 <p:commandButton id="lnk" action="#{MostrarDetalles.acer}" value="Realizar Oferta" update="userList">
			 <f:setPropertyActionListener target="#{MostrarDetalles.seleccion}" value="#{user}"/>
			 </p:commandButton>
			 
			 <p:tooltip for="lnk">
					<p:graphicImage value="/images/#{user.idPublicacion}.jpg" width="100" height="70" />
					<h:outputText value="El lugar donde puedes comprar, vender, rentar y anunciar" />
			     </p:tooltip>
                
			 </p:column> 
			 
             <p:column headerText="link"> 
			 <p:commandLink  action="#{MostrarPublicacion.eliminar}" value="ok" update="userList">    
			 <f:setPropertyActionListener target="#{MostrarPublicacion.seleccion}" value="#{user}"/>
			 </p:commandLink>
			 </p:column> 
			
			
            </p:dataTable>	
         
         
         
         	
		</h:form>
		
		<p class="f-right">Pagina Web presentada por Jose Inocencio Alvarado Rodriguez</p>
        <p>Copyright © 2013 <strong>Universidad Autonoma de Tlaxcala</strong>, All Rights Reserved &reg;</p>
        
    </h:body>
        
</html>